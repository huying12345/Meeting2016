
@{
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由亚萌智能表单代码生成工具生成。
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。除非此项目不再使用代码生成器生成。
//     如果想修改此文件的内容，请复制一份到此文件的上级目录进行修改
//
//     如有问题联系zongeasy@qq.com
//</auto-generated>
//------------------------------------------------------------------------------
    ViewBag.Title="编辑文档";
}

<div region="center" border="true" style="padding: 10px; background: #FFFFFF; border: 1px solid #ccc;">
    <form id="myForm" name="myForm" action="/api/Doc/DocInformationView/Edit" method="post">
        <table class="mytable"  cellpadding="1" width="100%" cellspacing="0" align="center">
<tr id="Container_CatalogID"><td id="Label_CatalogID" class="labeltd">类型：</td><td>&nbsp;

<input id="CatalogID" name="CatalogID" url="/api/Doc/DocCatalog/EditTree?&Value=@(Model.CatalogID)" value="@(Model.CatalogID)" style="width: 200px" />
<script type="text/javascript">
    var CatalogID_Value = '@(Model.CatalogID)';
    jQuery(function() {
        jQuery('#CatalogID').combotree(
        {
            onLoadSuccess:function(node, data) {
                jQuery('#CatalogID').combotree('setValue',CatalogID_Value);
            }
        });
    });
</script>
</td></tr>
<tr id="Container_Title"><td id="Label_Title" class="labeltd">标题：</td><td>&nbsp;
<input type="text" id="Title" name="Title" value="@(Model.Title)" class="easyui-validatebox textbox"  maxlength="200" style="width:200px" />
</td></tr>
<tr id="Container_InfoNo"><td id="Label_InfoNo" class="labeltd">文档编号：</td><td>&nbsp;
<input type="text" id="InfoNo" name="InfoNo" value="@(Model.InfoNo)" class="easyui-validatebox textbox"  maxlength="50" style="width:200px" />
</td></tr>
<tr id="Container_InfoType"><td id="Label_InfoType" class="labeltd">信息类型：</td><td>&nbsp;
@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_InfoType, "InfoType", Model.InfoType, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_FilePath"><td id="Label_FilePath" class="labeltd">主文：</td><td>&nbsp;
<input type="text" id="FilePath" name="FilePath" value="@(Model.FilePath)"  class="easyui-validatebox" style="width: "/>&nbsp;
<input type="file" id="Upload_FilePath" name="Upload_FilePath" />
<input type="button" id="btnFilePath_Upload" name="btnFilePath_Upload" value="上传" onclick="btnFilePath_UploadClick()"/>

<script type="text/javascript">
       ///上传按钮事件
       function btnFilePath_UploadClick(){
            jQuery("#myForm").ajaxSubmit( {
                type: 'post',
                dataType: 'json',
                url: "/api/SiteManage/UploadFile/Upload?FieldName=FilePath&UploadFieldName=Upload_FilePath&ModelID=DocInformationView&ModuleID=Doc",
                beforeSubmit:  function(formData, jqForm, options) {
                    var queryString = jQuery.param(formData);
                    if( jQuery("Upload_FilePath").val()==""){
                        alert("请选择你要上传的文件！");
                    }
                    return true;
                },
                success: function(result) {
                  // alert(msg);
                  // eval("var result="+msg);
                   if(result.Status==1){
                        jQuery("#FilePath").val(result.returnValue);
                        //deleteFile("Upload_FilePath");
                        alert("上传成功")
                   }else{
                        alert(result.returnValue);
                   }
                },
                error: function(error) {
                    //alert(error);
                }
           });
        }
       

            /**
        * file,input type=file 的name
        **/ 
        function deleteFile(file){
           var ie = (navigator.appVersion.indexOf("MSIE")!=-1);//IE 
           var ff = (navigator.userAgent.indexOf("Firefox")!=-1);//Firefox 

           if(ie)
            clearIEFileValue(jQuery("input[name="+file+"]")[0]);
           else
            jQuery("input[name="+file+"]").attr("value",""); //FF
        }
        //清空上传控件的值，obj为上传控件对象
        function clearIEFileValue(obj) {
            obj.select();
            document.execCommand("delete");
        }
</script></td></tr>
<tr id="Container_HtmlContent"><td id="Label_HtmlContent" class="labeltd">内容：</td><td>&nbsp;
<textarea id="HtmlContent" name="HtmlContent" style="width:600px;height:350px">@(Model.HtmlContent)</textarea>
<script src="/Resources/JsLib/ueditor/ueditor.config.js"></script>
<script src="/Resources/JsLib/ueditor/ueditor.all.js"></script>
<script src="/Resources/JsLib/ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript">
    $(function() {
        UE.getEditor('HtmlContent');
    });
</script></td></tr>
<tr id="Container_FileList"><td id="Label_FileList" class="labeltd">附件：</td><td>&nbsp;<div id="FieldDIV_FileList"></div>
<style>
    .file-row span {
        float: left;
    }
</style>
<link href="/Resources/JsLib/dropzone/dropzone.css" rel="stylesheet" />
<link href="/Resources/JsLib/dropzone/basic.css" rel="stylesheet"/>
<script src="/Resources/JsLib/dropzone/dropzone.js"></script>
<script src="/Static/v1/js/jQuery.batchFileUpload.js"></script>
<script type="text/javascript">
    jQuery(function() {
        jQuery('#FieldDIV_FileList').batchFileUpload({
            UploadFieldName: 'FileList',
            FieldName: "FileList",
            ModelID: 'DocInformationView',
            ModuleID: 'Doc',
            Value: '@Model.FileList',
        });
    });
</script></td></tr>
<input type="hidden" id="InfoID"  name="InfoID" value="@(Model.InfoID)"/>
</table>

        @RenderPage("~/Areas/Doc/Views/DocInformationView/Extend/Model_FormHtml.cshtml")
    </form>
</div>
<div region="south" border="false" style="text-align: right; background: #F6F6F6;height: 30px; line-height: 30px;">
    <a id="btnSubmit" class="easyui-linkbutton" icon="icon-ok" href="javascript:void(0)">确定</a>
    <a id="btnCancel" class="easyui-linkbutton" icon="icon-cancel" href="javascript:CloseDialog();">
        取消
    </a>
</div>
@section scripts{
    <script src="/Resources/JsLib/jquery.form.js"></script>
    <script src="/Resources/JsLib/My97DatePicker/WdatePicker.js"></script>
    <script src="/Static/v1/js/Utils.js"></script>
    <script src="/Static/v1/js/form.js"></script>
    <script type="text/javascript">
        jQuery(function() {
            CheckConditions();
jQuery('input[name=InfoType]').bind('click', CheckConditions);
function CheckConditions(){
//if((IsInCheckBox(document.myForm.InfoType,'1')||IsInCheckBox(document.myForm.InfoType,'1'))){
//jQuery('#Container_FilePath').show();
//} 
//else{ 
//jQuery('#Container_FilePath').hide();
//} 
if((IsInCheckBox(document.myForm.InfoType,'2')||IsInCheckBox(document.myForm.InfoType,'2'))){
jQuery('#Container_HtmlContent').show();
} 
else{ 
jQuery('#Container_HtmlContent').hide();
} 
jQuery('fieldset').show(); 
jQuery("fieldset").each(function(){ 
if(jQuery('tr',this).length>0){
if(jQuery('tr:visible',this).length>0){jQuery(this).show()} else{jQuery(this).hide()}
}
});
}
;
        });
    </script>
    @RenderPage("~/Areas/Doc/Views/DocInformationView/Extend/Model_FormJs.cshtml")
}

